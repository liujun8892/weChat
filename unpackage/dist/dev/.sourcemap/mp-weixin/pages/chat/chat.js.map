{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/liujun/Documents/HBuilderProjects/wxChat/pages/chat/chat.nvue?83de","webpack:////Users/liujun/Documents/HBuilderProjects/wxChat/pages/chat/chat.nvue?bad7","webpack:////Users/liujun/Documents/HBuilderProjects/wxChat/pages/chat/chat.nvue?13ad","uni-app:///pages/chat/chat.nvue","webpack:////Users/liujun/Documents/HBuilderProjects/wxChat/pages/chat/chat.nvue?344c","webpack:////Users/liujun/Documents/HBuilderProjects/wxChat/pages/chat/chat.nvue?32e9"],"names":["createPage","Page"],"mappings":"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BAwBA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA/BA;AAgCA;AACA,kBAjCA,4BAiCA;AACA;AACA,KAnCA;AAoCA;AACA,mBArCA,6BAqCA;AACA;AACA;AACA;AACA;AACA,KA1CA;AA2CA;AACA,gBA5CA,wBA4CA,CA5CA,EA4CA,IA5CA,EA4CA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,kBADA;AAEA;AACA;AACA,WAJA;AAKA;AACA;AACA,WAPA;;AASA;AACA,KA3DA;AA4DA;AACA,iBA7DA,2BA6DA;AACA;AACA;AACA,KAhEA;AAiEA;AACA,cAlEA,sBAkEA,IAlEA,EAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,EAFA;AAGA;AACA,KArFA;AAsFA;AACA,WAvFA,mBAuFA,IAvFA,EAuFA,IAvFA,EAuFA;AACA;AACA,aADA;AAEA,uBAFA;AAGA,+CAHA;AAIA,kBAJA;AAKA,gBALA;AAMA,yCANA;AAOA,uBAPA;AAQA,yBARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,EAKA,EALA;AAMA;AACA,KArHA;AAsHA;AACA,gBAvHA,0BAuHA;;;;;;;;;AASA,KAhIA;AAiIA,mBAjIA,2BAiIA,CAjIA,EAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5IA;AA6IA,sBA7IA,8BA6IA,KA7IA,EA6IA,SA7IA,EA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAXA;;AAaA,KA7JA;AA8JA;AACA,eA/JA,yBA+JA;AACA;AACA;AACA;AACA;AACA,KApKA,EAzKA,E;;;;;;;;;;;;;ACxGA;AAAA;AAAA;AAAA;AAAgrC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACApsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chat/chat.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/chat/chat.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.nvue?vue&type=template&id=6e1957d8&scoped=true&\"\nvar renderjs\nimport script from \"./chat.nvue?vue&type=script&lang=js&\"\nexport * from \"./chat.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.nvue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e1957d8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/chat.nvue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=template&id=6e1957d8&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  label,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n  button {\n    margin: 0;\n  }\n</style>\n<template>\r\n\t<view>\r\n\t\t<!-- 导航栏 -->\r\n\t\t<free-nav-bar title=\"元宇宙世界\" msgCount=\"8\" :showBack=\"true\" ref='navBar' :isFixed=\"true\">\r\n\t\t\t<free-icon-button :icon=\"'\\ue6fd'\" slot=\"rightIcon\"></free-icon-button>\r\n\t\t</free-nav-bar>\r\n\t\t<!-- 聊天区域 -->\r\n\t\t<!-- :style=\"`top: ${$refs.navBar.getPlaceHolderHeight()}px;`\" -->\r\n\t\t<scroll-view scroll-y=\"true\" class=\"position-fixed left-0 right-0 bg-light px-3\"\r\n\t\t\t:style=\"{top: contentFixedHeight + 'px',bottom: getChatContentHeight + 'px'}\" @click=\"handChatClick\">\r\n\t\t\t<block v-for=\"(item, index) in chatList\">\r\n\t\t\t\t<free-chat-item :item=\"item\" :index=\"index\" :key=\"index\"\r\n\t\t\t\t\t:proTime=\"index === 0 ? 0 : chatList[index-1].create_time\" @long=\"handleLongPress\"\r\n\t\t\t\t\tref=\"freeChatItem\"></free-chat-item>\r\n\t\t\t</block>\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- 底部聊天输入框 -->\r\n\t\t<view class=\"position-fixed left-0 right-0 flex align-center border-top\"\r\n\t\t\tstyle=\"background-color: #f7f7f6;height: 105rpx;\" :style=\"{bottom: keybordHeight + 'px'}\">\r\n\t\t\t<free-icon-button :icon=\"'\\ue606'\" slot=\"rightIcon\"></free-icon-button>\r\n\t\t\t<view class=\"flex-1\">\r\n\t\t\t\t<textarea fixed class=\"p-2 bg-white rounded font-md\" style=\"height: 75rpx;\" :adjust-position=\"false\"\r\n\t\t\t\t\tv-model=\"chatMsg\" @focus=\"handleChatFocus\" @blur=\"handleChatBlur\"></textarea>\r\n\t\t\t</view>\r\n\t\t\t<free-icon-button :icon=\"'\\ue605'\" slot=\"rightIcon\" @click=\"openAction('emotion')\"></free-icon-button>\r\n\t\t\t<free-icon-button :icon=\"'\\ue603'\" slot=\"rightIcon\" v-if=\"!chatMsg || chatMsg == ''\"\r\n\t\t\t\t@click=\"openAction('action')\"></free-icon-button>\r\n\t\t\t<view class=\"main-bg-color rounded px-2 py-1 mr-2\" @click=\"sendMsg('text')\" v-else>\r\n\t\t\t\t<text class=\"font text-white\">发送</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 弹出操作聊天组件组件 -->\r\n\t\t<free-popup ref=\"popup\" :contentWidth=\"240\" :contentHeight=\"getChatPopHeight\" :maskShow=\"false\"\r\n\t\t\t:securityBottomHeight='105'>\r\n\t\t\t<view class=\"flex flex-column\" style=\"width: 240rpx;\" :style=\"{height: getChatPopHeight + 'rpx'}\">\r\n\t\t\t\t<view class=\"flex-1 flex align-center\" hover-class=\"bg-light\"\r\n\t\t\t\t\tv-for=\"(item,index) in animateChatOptionList\" :key=\"index\"\r\n\t\t\t\t\t@click=\"handleChatPopEvent($event,item.event)\">\r\n\t\t\t\t\t<text class=\"font-md pl-3\">{{item.name}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</free-popup>\r\n\r\n\t\t<free-popup ref=\"actionPopup\" :positionBottom=\"true\" :maskShow=\"false\" @hideBottomPop=\"hideBottomPop\"\r\n\t\t\thideOrigin=\"center bottom\" :defaultMask=\"false\">\r\n\t\t\t<view class=\"border-top border-light-secondary\" style=\"height: 580rpx;background-color: #f7f7f6\">\r\n\t\t\t\t<swiper :indicator-dots=\"true\" style=\"height: 510rpx;\">\r\n\t\t\t\t\t<swiper-item class=\"row\" v-for=\"(item, index) in emotionOrActionData\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"col-3 flex flex-column align-center justify-center\" style=\"height: 255rpx;\"\r\n\t\t\t\t\t\t\tv-for=\"(item2, index2) in item\" :key=\"index2\" @click=\"handleAction($event,item2)\">\r\n\t\t\t\t\t\t\t<image :src=\"item2.icon\" mode=\"widthFix\" style=\"width: 100rpx;height: 100rpx;\"></image>\r\n\t\t\t\t\t\t\t<!-- <image src=\"../..\" mode=\"widthFix\" style=\"width: 100rpx;height: 100rpx;\"></image> -->\r\n\t\t\t\t\t\t\t<text class=\"font text-light-muted mt-2\">{{item2.name}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t</view>\r\n\t\t</free-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport freeNavBar from '@/component/free-ui/free-nav-bar.vue'\r\n\timport freeIconButton from '@/component/free-ui/free-icon-button.vue'\r\n\timport freeChatItem from '@/component/chat/free-chat-item.vue'\r\n\timport freePopup from '@/component/free-ui/free-popup.vue'\r\n\t// #ifdef APP-PLUS-NVUE\r\n\tlet domModule = weex.requireModule('dom')\r\n\t// #endif\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tfreeNavBar,\r\n\t\t\tfreeIconButton,\r\n\t\t\tfreeChatItem,\r\n\t\t\tfreePopup\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tgetChatPopHeight() {\r\n\t\t\t\tlet H = 100\r\n\t\t\t\treturn this.animateChatOptionList.length > 0 ? this.animateChatOptionList.length * H : this.chatOptionList\r\n\t\t\t\t\t.length * H\r\n\t\t\t},\r\n\t\t\tgetChatContentHeight() {\r\n\t\t\t\treturn this.keybordHeight + uni.upx2px(105)\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tchatMsg: '',\r\n\t\t\t\tkeybordHeight: 0,\r\n\t\t\t\tchatMode: '',\r\n\t\t\t\temotionOrActionData: [],\r\n\t\t\t\temotionData: [],\r\n\t\t\t\tactionData: [\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\tname: '相册',\r\n\t\t\t\t\t\t\ticon: '/static/images/extends/pic.png',\r\n\t\t\t\t\t\t\tevent: 'album'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: '拍摄',\r\n\t\t\t\t\t\t\ticon: '/static/images/extends/video.png',\r\n\t\t\t\t\t\t\tevent: 'shoot'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: '收藏',\r\n\t\t\t\t\t\t\ticon: '/static/images/extends/shoucan.png',\r\n\t\t\t\t\t\t\tevent: 'fav'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: '名片',\r\n\t\t\t\t\t\t\ticon: '/static/images/extends/man.png',\r\n\t\t\t\t\t\t\tevent: 'card'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: '语音通话',\r\n\t\t\t\t\t\t\ticon: '/static/images/extends/phone.png',\r\n\t\t\t\t\t\t\tevent: 'phone'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: '位置',\r\n\t\t\t\t\t\t\ticon: '/static/images/extends/path.png',\r\n\t\t\t\t\t\t\tevent: 'position'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t],\r\n\t\t\t\tcontentFixedHeight: '',\r\n\t\t\t\tchatCheckedIndex: '',\r\n\t\t\t\tanimateChatOptionList: [],\r\n\t\t\t\tchatOptionList: [{\r\n\t\t\t\t\t\tname: '复制',\r\n\t\t\t\t\t\tevent: 'copy'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '发送给朋友',\r\n\t\t\t\t\t\tevent: 'sendFriend'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '收藏',\r\n\t\t\t\t\t\tevent: 'fav'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '删除',\r\n\t\t\t\t\t\tevent: 'del'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '多选',\r\n\t\t\t\t\t\tevent: 'mulSelected'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '撤回',\r\n\t\t\t\t\t\tevent: 'feedback'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tchatList: [{\r\n\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '213213213213213213213213213213213213213123123213213213213213213213',\r\n\t\t\t\t\t\tcreate_time: 1432133464,\r\n\t\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\t\tisAnimation: false,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '4567485438545745734957489574389574935743975438957398475938753874789239498',\r\n\t\t\t\t\t\tcreate_time: 1632133464,\r\n\t\t\t\t\t\tisRemove: true,\r\n\t\t\t\t\t\tisAnimation: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '4567485438545745734957489574389574935743975438957398475938753874789239498',\r\n\t\t\t\t\t\tcreate_time: 1632133464,\r\n\t\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\t\tisAnimation: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '4567485438545745734957489574389574935743975438957398475938753874789239498',\r\n\t\t\t\t\t\tcreate_time: 1632133464,\r\n\t\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\t\tisAnimation: true\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '4567485438545745734957489574389574935743975438957398475938753874789239498',\r\n\t\t\t\t\t\tcreate_time: 1632133464,\r\n\t\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\t\tisAnimation: true\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '4567485438545745734957489574389574935743975438957398475938753874789239498',\r\n\t\t\t\t\t\tcreate_time: 1632133464,\r\n\t\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\t\tisAnimation: true\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tdata: '4567485438545745734957489574389574935743975438957398475938753874789239498',\r\n\t\t\t\t\t\tcreate_time: 1632133464,\r\n\t\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\t\tisAnimation: true\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\n\t\tcreated() {\n\t\t\tthis.initEmotionData()\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.contentFixedHeight = this.$refs.navBar.getPlaceHolderHeight()\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (this.chatMode == 'text' || this.chatMode == '') {\r\n\t\t\t\t\t\tthis.keybordHeight = res.height\r\n\t\t\t\t\t\tif (this.keybordHeight > 0) {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.keybordHeight = res.height\r\n\t\t\t\t\t\t\t\tthis.pageToBottom()\r\n\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 50)\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 初始化表情包\r\n\t\t\tinitEmotionData() {\r\n\t\t\t\tlet totalEmotion = 20\r\n\t\t\t\tlet totalPage = Math.ceil(20 / 8)\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tfor (let i = 0; i < totalPage; i++) {\r\n\t\t\t\t\tarr = []\r\n\t\t\t\t\tfor (let j = 0; j < 8; j++) {\r\n\t\t\t\t\t\tlet currentEmotionNumber = i * 8 + j\r\n\t\t\t\t\t\tif (currentEmotionNumber >= 20) {\r\n\t\t\t\t\t\t\tcontinue\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet emotion = {\r\n\t\t\t\t\t\t\tname: '表情' + (currentEmotionNumber + 1),\r\n\t\t\t\t\t\t\ticon: `/static/images/emoticon/5497/${currentEmotionNumber}.gif`,\r\n\t\t\t\t\t\t\tevent: 'emotion'\r\n\t\t\t\t\t\t}\n\t\t\t\t\t\tarr.push(emotion)\r\n\t\t\t\t\t}\n\t\t\t\t\tthis.emotionData.push(arr)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 点击聊天页面\r\n\t\t\thandChatClick() {\r\n\t\t\t\tconsole.log('点击聊天页面');\r\n\t\t\t\tif (this.chatMode == 'action' || this.chatMode == 'emotion') {\r\n\t\t\t\t\tthis.$refs.actionPopup.hidePopup()\r\n\t\t\t\t} else if (this.chatMode == 'text') {\r\n\t\t\t\t\tuni.hideKeyboard()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 失去焦点\r\n\t\t\thandleChatBlur() {\r\n\t\t\t\t// this.chatMode = ''\r\n\t\t\t},\r\n\t\t\t// 输入框聚焦\r\n\t\t\thandleChatFocus() {\r\n\t\t\t\tif (this.chatMode == 'action') {\r\n\t\t\t\t\tthis.$refs.actionPopup.hidePopup()\r\n\t\t\t\t}\r\n\t\t\t\tthis.chatMode = 'text'\r\n\t\t\t},\r\n\t\t\t// 操作选项。。\r\n\t\t\thandleAction(e, item) {\r\n\t\t\t\te.stopPropagation()\n\t\t\t\tif(item.event == 'emotion') {\n\t\t\t\t\tthis.sendMsg('emotion',item)\n\t\t\t\t}else if(item.event == 'album') {\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount:9,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tconsole.log(res,111);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: (res) => {\n\t\t\t\t\t\t\tconsole.log(res,222);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 隐藏弹框\r\n\t\t\thideBottomPop() {\r\n\t\t\t\tconsole.log('子组件消息隐藏。。。');\r\n\t\t\t\tthis.keybordHeight = 0\r\n\t\t\t},\r\n\t\t\t// 打开操作菜单\r\n\t\t\topenAction(type) { // text action emotion\r\n\t\t\t\tif (this.chatMode === 'text') {\r\n\t\t\t\t\t// this.chatMode = 'action'\r\n\t\t\t\t\tuni.hideKeyboard()\r\n\t\t\t\t}\r\n\t\t\t\tthis.chatMode = type\r\n\t\t\t\tif (type == 'action') {\r\n\t\t\t\t\tthis.emotionOrActionData = this.actionData\r\n\t\t\t\t} else if (type == 'emotion') {\r\n\t\t\t\t\tthis.emotionOrActionData = this.emotionData\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.$refs.actionPopup.getPopupStatus()) {\r\n\t\t\t\t\tthis.keybordHeight = uni.upx2px(580)\r\n\t\t\t\t\tthis.$refs.actionPopup.showPopup(0, 0)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.pageToBottom()\r\n\t\t\t\t\t}, 50)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 发送消息\r\n\t\t\tsendMsg(type,item) {\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tnickname: '赵子龙',\r\n\t\t\t\t\tavatar: '/static/images/demo/demo6.jpg',\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tdata: '',\r\n\t\t\t\t\tcreate_time: new Date().getTime(),\r\n\t\t\t\t\tisRemove: false,\r\n\t\t\t\t\tisAnimation: true\r\n\t\t\t\t}\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\tmsg.data = this.chatMsg\r\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'emotion':\n\t\t\t\t\t\tmsg.data = item.icon\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.data) {\r\n\t\t\t\t\tthis.chatList.push(msg)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.pageToBottom()\n\t\t\t\t\t\tif(type == 'text') {\n\t\t\t\t\t\t\tthis.chatMsg = ''\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 50)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 点击输入款的时候页面滚动都底端\r\n\t\t\tpageToBottom() {\r\n\t\t\t\t// #ifdef APP-PLUS-NVUE\r\n\t\t\t\tlet chatDoms = this.$refs.freeChatItem\r\n\t\t\t\tif (this.chatList.length > 0) {\r\n\t\t\t\t\tlet lastChatDom = chatDoms[this.chatList.length - 1]\r\n\t\t\t\t\tconsole.log(lastChatDom, '1111');\r\n\t\t\t\t\tdomModule.scrollToElement(lastChatDom, {})\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\t\r\n\t\t\t},\r\n\t\t\thandleLongPress(e) {\r\n\t\t\t\tconsole.log(e, '长按的信息');\r\n\t\t\t\tthis.chatCheckedIndex = e.index\r\n\t\t\t\tlet currentCheckedItem = this.chatList[e.index]\r\n\t\t\t\tthis.animateChatOptionList = [...this.chatOptionList]\r\n\t\t\t\t// 不是自己,没有撤回功能\r\n\t\t\t\tconsole.log(currentCheckedItem, '2222');\r\n\t\t\t\tif (currentCheckedItem.id !== 1) {\r\n\t\t\t\t\tthis.animateChatOptionList = this.animateChatOptionList.filter(v => v.name !== '撤回')\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.popup.showPopup(e.x, e.y)\r\n\t\t\t},\r\n\t\t\thandleChatPopEvent(event, eventName) {\r\n\t\t\t\tevent.stopPropagation()\r\n\t\t\t\tconsole.log(eventName, 'eventName');\r\n\t\t\t\tswitch (eventName) {\r\n\t\t\t\t\tcase 'msgTop':\r\n\t\t\t\t\t\tthis.toggleChatTop()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'delChat':\r\n\t\t\t\t\t\tthis.delChat()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'feedback':\r\n\t\t\t\t\t\tthis.feedbackMsg()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 撤回消息\r\n\t\t\tfeedbackMsg() {\r\n\t\t\t\tif (this.chatCheckedIndex > -1) {\r\n\t\t\t\t\tthis.chatList[this.chatCheckedIndex].isRemove = true\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.popup.hidePopup()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1633420863736\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}